# AI Studio Build App Reverse Proxy

è¿™æ˜¯ä¸€ä¸ªä¸º Google AI Studio çš„ "Build App" åŠŸèƒ½è®¾è®¡çš„åå‘ä»£ç†é¡¹ç›®ã€‚å®ƒå…è®¸æ‚¨é€šè¿‡ API çš„æ–¹å¼ï¼Œè°ƒç”¨å’Œä½¿ç”¨åœ¨ AI Studio ä¸­æ„å»ºçš„åº”ç”¨æ¨¡å‹ã€‚

æœ¬é¡¹ç›®ä½¿ç”¨ Playwright è‡ªåŠ¨åŒ–æµè§ˆå™¨æ“ä½œã€‚

---

## ğŸš€ é¡¹ç›®ç‰¹ç‚¹

æœ¬é¡¹ç›®ä¸“æ³¨äº **Docker å®¹å™¨åŒ–éƒ¨ç½²**ï¼Œå¹¶åœ¨åŸé¡¹ç›®çš„åŸºç¡€ä¸Šï¼Œåˆ©ç”¨ AI è¿›è¡Œäº†æ·±åº¦å®šåˆ¶å’ŒåŠŸèƒ½å¢å¼ºï¼Œæ—¨åœ¨æä¾›ä¸€ä¸ª**æ›´å¥å£®ã€æ›´ç¨³å®šã€æ›´æ˜“äºç»´æŠ¤**çš„ç”Ÿäº§çº§è§£å†³æ–¹æ¡ˆã€‚

> **å…è´£å£°æ˜**: æœ¬ä»“åº“çš„æ‰€æœ‰ä»£ç ä¿®æ”¹å‡ç”± AI ç”Ÿæˆï¼Œæ—¨åœ¨æ¢ç´¢è‡ªåŠ¨åŒ–ç¼–ç¨‹ä¸åº”ç”¨ä¼˜åŒ–çš„å¯èƒ½æ€§ã€‚è¯·åœ¨å……åˆ†ç†è§£ä»£ç åŠŸèƒ½å’Œæ½œåœ¨é£é™©çš„åŸºç¡€ä¸Šé…Œæƒ…ä½¿ç”¨ï¼Œä½œè€…å¯¹å¯èƒ½äº§ç”Ÿçš„ä»»ä½•é—®é¢˜æ¦‚ä¸è´Ÿè´£ã€‚

---

###  ğŸš€Quick Start / å¿«é€Ÿå¼€å§‹

è¦å¿«é€Ÿå¯åŠ¨å¹¶è¿è¡Œæ­¤é¡¹ç›®ï¼Œè¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ã€‚

1.  ğŸ“ **å‡†å¤‡ `docker-compose.yml` æ–‡ä»¶**:
    åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `docker-compose.yml`ï¼Œå¹¶ç²˜è´´ä»¥ä¸‹å†…å®¹ï¼š
    ```yaml
    version: '3.8'

    services:
      biu_biu_biu:
        image: ghcr.io/junwu-git/biu_biu_biu:latest
        container_name: biu_biu_biu
        restart: unless-stopped
        ports:
          - "8889:8889"
        env_file:
          - .env
        deploy:
          resources:
            limits:
              memory: 1024M
        volumes:
          - ./auth:/app/auth
          - ./debug-screenshots:/app/debug-screenshots
        networks:
          - internal-redis-network # ç¡®ä¿ biu_biu_biu å¯ä»¥è®¿é—®åˆ° redis-server

      # Redis æœåŠ¡
      redis-server:
        image: redis:latest 
        container_name: redis
        restart: always
        command: redis-server --appendonly yes # å¯ç”¨æŒä¹…åŒ– (å¯é€‰ï¼Œä½†æ¨è)
        volumes:
          - ./data:/data # æ•°æ®æŒä¹…åŒ–
        networks:
          - internal-redis-network # è¿æ¥åˆ°å†…éƒ¨ç½‘ç»œï¼Œä¸ biu_biu_biu é€šä¿¡
        # ports: # Redis é€šå¸¸ä¸éœ€è¦å¯¹å¤–æš´éœ²ç«¯å£ï¼Œä½†å¦‚æœéœ€è¦ï¼Œå¯ä»¥å–æ¶ˆæ³¨é‡Š
        #   - "6379:6379" 

    networks:
      internal-redis-network: # å†…éƒ¨ç½‘ç»œï¼Œç”¨äº biu_biu_biu å’Œ redis-server é€šä¿¡
        driver: bridge

    ```

3.  ğŸ”‘ **å‡†å¤‡ `.env` æ–‡ä»¶**:
    åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼Œå¹¶ç²˜è´´ä»¥ä¸‹å†…å®¹ã€‚è¯·**åŠ¡å¿…æ›¿æ¢ `API_KEYS`** ä¸ºæ‚¨çš„å®é™…å¯†é’¥ã€‚
    ```env
    # =================================================================
    # ===================         æ ¸å¿ƒé…ç½®         ===================
    # =================================================================

    # --- ç”¨æˆ·ä¸æƒé™ (Docker) ---
    # æè¿°: ç”¨äº Docker å®¹å™¨å†…æ–‡ä»¶æƒé™çš„æ˜ å°„ã€‚
    # ç”¨æ³•: åœ¨ä½ çš„ä¸»æœºä¸Šè¿è¡Œ `id -u` å’Œ `id -g` æ¥è·å–å€¼ã€‚
    # TARGET_UID=1001
    # TARGET_GID=1001

    # --- API å¯†é’¥ (å®‰å…¨) ---
    # æè¿°: ç”¨äºä¿æŠ¤ä»£ç†æœåŠ¡çš„è®¿é—®å¯†é’¥ï¼Œå¤šä¸ªå¯†é’¥ç”¨è‹±æ–‡é€—å·åˆ†éš”ã€‚
    # ç¤ºä¾‹: API_KEYS=key1,key2,key3
    API_KEYS=your_secret_api_key_here

    # --- æœåŠ¡å™¨ç›‘å¬é…ç½® ---
    # æè¿°: ä»£ç†æœåŠ¡å™¨ç›‘å¬çš„ç«¯å£å’Œä¸»æœºåœ°å€ã€‚
    # PORT=8889
    # HOST=0.0.0.0

    # =================================================================
    # ===================         åŠŸèƒ½é…ç½®         ===================
    # =================================================================

    # --- è°ƒè¯•ä¸æµå¼æ¨¡å¼ ---
    # æè¿°: å¼€å¯æˆ–å…³é—­è°ƒè¯•æ¨¡å¼ï¼Œä»¥åŠè®¾ç½®å“åº”æ¨¡å¼ ('real' æˆ– 'fake')ã€‚
    # DEBUG_MODE=false
    # STREAMING_MODE=real

    # --- è´¦å·åˆ‡æ¢ä¸é‡è¯•ç­–ç•¥ ---
    # æè¿°: é…ç½®æœåŠ¡åœ¨é‡åˆ°é”™è¯¯æ—¶çš„è¡Œä¸ºã€‚
    # FAILURE_THRESHOLD=0                 # è¿ç»­å¤±è´¥å¤šå°‘æ¬¡ååˆ‡æ¢è´¦å· (0ä¸ºç¦ç”¨)ã€‚
    # MAX_RETRIES=3                       # å•ä¸ªè¯·æ±‚çš„æœ€å¤§é‡è¯•æ¬¡æ•°ã€‚
    # RETRY_DELAY=3000                    # æ¯æ¬¡é‡è¯•ä¹‹é—´çš„å»¶è¿Ÿ (æ¯«ç§’)ã€‚
    # INITIAL_AUTH_INDEX=1                # åˆå§‹å¯åŠ¨æ—¶ä½¿ç”¨çš„è´¦å·ç´¢å¼• (ä»1å¼€å§‹)ã€‚
    # IMMEDIATE_SWITCH_STATUS_CODES=429,503 # å“ªäº›HTTPçŠ¶æ€ç ä¼šç«‹å³è§¦å‘è´¦å·åˆ‡æ¢ã€‚

    # --- Redis ç¼“å­˜ (å¯é€‰) ---
    # æè¿°: ç”¨äºç¼“å­˜è¯·æ±‚ç»“æœï¼Œå‡å°‘é‡å¤è°ƒç”¨ã€‚å¦‚æœæœªè®¾ç½® REDIS_URLï¼Œåˆ™ç¦ç”¨ç¼“å­˜ã€‚
    # REDIS_URL=redis://redis:6379/0      # Redis è¿æ¥ URLã€‚
    # CACHE_TTL=300                       # ç¼“å­˜æœ‰æ•ˆæœŸ (ç§’)ã€‚

    # =================================================================
    # ===================       æµè§ˆå™¨è‡ªåŠ¨åŒ–é…ç½®       ===================
    # =================================================================

    # --- è‡ªåŠ¨åŒ–ç›®æ ‡ (JSONæ ¼å¼) ---
    # æè¿°: è¿™æ˜¯ä¸€ä¸ª JSON å­—ç¬¦ä¸²ï¼Œå®šä¹‰äº†æµè§ˆå™¨è‡ªåŠ¨åŒ–æ“ä½œçš„ç›®æ ‡ã€‚
    # æ³¨æ„: è¯·ç¡®ä¿è¿™æ˜¯ä¸€ä¸ªå•è¡Œçš„ã€åˆæ³•çš„ JSON å­—ç¬¦ä¸²ã€‚
    # AUTOMATION_TARGETS_JSON={"targetUrl":"https://aistudio.google.com/u/0/apps/bundled/blank?showAssistant=true&showCode=true","popupCloseButtons":["button:has-text('Got it')","button:has-text('âœ•')","button:has-text('close')"],"codeButtonClick":{"role":"button","name":"Code","exact":true},"editorSelector":"div.monaco-editor","previewButton":{"role":"button","name":"Preview"}}
    ```

4.  ğŸ“ **åˆ›å»ºæœ¬åœ°ç›®å½•ä¸å‡†å¤‡è®¤è¯æ–‡ä»¶**:
    åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­ï¼Œåˆ›å»º `auth` å’Œ `debug-screenshots` ç›®å½•ã€‚
    ```bash
    mkdir auth debug-screenshots
    chmod 777 debug-screenshots # ç¡®ä¿å®¹å™¨æœ‰æƒé™å†™å…¥è°ƒè¯•æˆªå›¾
    ```
    æœ¬é¡¹ç›®ä¾èµ–äºæµè§ˆå™¨è®¤è¯æ–‡ä»¶ã€‚æ‚¨å¯ä»¥é€šè¿‡è¿è¡Œ `save-auth.js` è„šæœ¬æ¥ç”Ÿæˆè¿™äº›æ–‡ä»¶ã€‚å®Œæˆç™»å½•åï¼Œç”Ÿæˆçš„ `auth-X.json` æ–‡ä»¶ä¼šè‡ªåŠ¨ä¿å­˜åœ¨ `auth` ç›®å½•ä¸­ã€‚

5.  ğŸš€ **å¯åŠ¨æœåŠ¡**:
    ```bash
    docker-compose up -d
    ```
